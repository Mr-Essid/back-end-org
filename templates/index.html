<!DOCTYPE html>

<html>


<head>
    <title>login page iotek</title>

    <link rel="shortcut icon" href="{{ url_for('static', path='/images/iotek_prev_ui.png') }}" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', path='/master.css') }}">
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body {
            background-color: #F0F2F5;
        }
    </style>
</head>

<body style="display:none; background-color=">
    <section class="vh-100">
        <div class="container-fluid h-custom h-100">
        <div class="row h-75 align-items-center">

            <div class="row d-flex justify-content-center mt-4">
                    <div class="row justify-content-center">
                        <div class="second_child  col-lg-3 col-md-12 text-center text-lg-start">
                            <div class="">
                                <div class="logo">
                                    <img src="/static/images/iotek_prev_ui.png" alt="iotek-image" style="max-width: 140px;">
                                </div>
                            </div>
                            <p class=".load py-lg-3 pe-lg-3">
                                The arrival of our admin has been embraced, recognizing them as an invaluable addition to our team!
                            </p>
                        </div>

                        <div class="first_form col-lg-4 col-md-12">
                            <form method="post" enctype="application/x-www-form-urlencoded" class="px-5 py-5 rounded border shadow-sm" style="background-color: white;" action="{{ url_for('dashboard') }}" id = "form" name="login_from">

                                <div class="alert alert-danger d-flex align-items-center justify-content-between d-none" role="alert" id="alert_error">
                                    <div>
                                        username or password incorrect, check your cridentiels
                                    </div>
                                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
                                </div>

                                <p class="h2 mb-4">Sign in</p>


                                <!-- Email input -->
                                <div data-mdb-input-init class="form-outline mb-4">
                                    <input type="email" id="username" class="form-control form-control-lg border-color-input"
                                           placeholder="Enter a username" name="username"/>
                                    <label class="form-label" for="username">Email address</label>
                                    <div class="username_error" style="display: none;">
                                        <p class="danger text-danger p-0">
                                            username shouldn't be empty
                                        </p>
                                    </div>
                                </div>

                                <!-- Password input -->
                                <div data-mdb-input-init class="form-outline mb-3">
                                    <input type="password" id="password_" class="form-control form-control-lg border-color-input"
                                           placeholder="Enter password" name="password" />
                                    <label class="form-label" for="password_">Password</label>
                                    <div class="password_error text-danger p-0" style="display: none;">
                                        <p>password shouldn't be empty</p>
                                    </div>
                                </div>


                                <div class="text-center text-lg-start mt-4 pt-2">
                                    <button type="submit" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary-it w-100 rounded p-2 fw-bold"
                                            style="padding-left: 2.5rem; padding-right: 2.5rem;">Login</button>
                                </div>
                                
                            </form>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>

      </section>


</body>


<script>


  
    
    if(window.location.search.split('&')[0].indexOf('x-error') > 0) {
        document.getElementById('alert_error').classList.remove('d-none');
    }

    document.forms['login_from'].onsubmit = function(e) { 
        var isOkUsername = true
        if(document.forms['login_from']['username'].value == ""){ 
            document.getElementsByClassName("username_error")[0].style.display = "block"
            isOkUsername = false
        }

        var isOkPassword = true;
        if(document.forms['login_from']['password'].value == "") {
            document.getElementsByClassName("password_error")[0].style.display = "block"
            isOkPassword = false
        }
        return isOkPassword && isOkUsername

    }


    document.forms['login_from']['username'].onfocus = function () {
        document.getElementsByClassName("password_error")[0].style.display = "none"
        document.getElementsByClassName("username_error")[0].style.display = "none"
        window.history.replaceState(null, '', window.location.pathname);
    }

    document.forms['login_from']['password'].onfocus = function () {
        document.getElementsByClassName("password_error")[0].style.display = "none"
        document.getElementsByClassName("username_error")[0].style.display = "none"
        window.history.replaceState(null, '', window.location.pathname);
    }




</script>
</html>
